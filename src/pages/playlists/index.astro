---
import PageLayout from "@/layouts/Base";
import type { Playlists } from "@/data/models/playlist";
import { getYearSoFarPlaylistsFromDB, getPastJamsPlaylistsFromDB } from "../../lib/spotify";
import ImageWithBadge from "src/components/ImageWithBadge";

const playlists: Playlists[] = await getYearSoFarPlaylistsFromDB();
const pastPlaylists: Playlists[] = await getPastJamsPlaylistsFromDB();
const meta = {
	title: "Spotify Jams",
	description: "A collection of monthly liked songs",
};
export const prerender = true;
---

<PageLayout meta={meta}>
	<h1 class="title mb-8 sm:mb-6">Year so far...</h1>
	<ul class="grid gap-4 sm:gap-8 grid-cols-2 sm:grid-cols-4">
		{
			playlists.map((playlist) => {
				return (
					<li>
						<a href={`/playlists/${playlist.id}`} class="cactus-link">
							<ImageWithBadge client:load imageUrl={playlist.artwork} underText={playlist.name} />
						</a>
					</li>
				);
			})
		}
	</ul>
	<h1 class="title my-8 sm:my-6">Past Jams</h1>
	<ul class="grid gap-4 sm:gap-8 grid-cols-2 sm:grid-cols-4">
		{
			pastPlaylists.map((playlist) => {
				return (
					<li>
						<a href={`/playlists/${playlist.id}`}  class="cactus-link">
							<ImageWithBadge client:load imageUrl={playlist.artwork} underText={playlist.name} />
						</a>
					</li>
				);
			})
		}
	</ul>
</PageLayout>
