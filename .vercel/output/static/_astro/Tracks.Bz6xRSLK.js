import{j as n}from"./jsx-runtime.Dla7y0KP.js";import{r as u}from"./index.CfLG8xVc.js";import{P as x}from"./play-icon.D_qdTj1N.js";function d({className:e}){return n.jsx(n.Fragment,{children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",className:e,children:n.jsx("path",{d:"M0 128C0 92.7 28.7 64 64 64H320c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"})})})}const f=({src:e,isPlaying:l,onStop:s,onPlay:r})=>n.jsxs("span",{children:[l?n.jsx("button",{onClick:()=>{l&&s()},children:n.jsx(d,{className:"w-[10px] fill-link mr-2 hover:fill-accent"})}):n.jsx("button",{onClick:()=>{l||(s(),r())},children:n.jsx(x,{className:"w-[10px] fill-accent mr-2 hover:fill-link"})}),n.jsx("audio",{src:e,autoPlay:l})]}),j=({tracks:e})=>{const[l,s]=u.useState(null),r=u.useRef(null),t=()=>{if(null!==l){const e=r.current;null!==e&&(e.pause(),e.currentTime=0),s(null)}};return u.useEffect((()=>{const e=r.current;if(null!==e)return e.addEventListener("ended",t),()=>{e.removeEventListener("ended",t)}}),[l,t]),n.jsx("ol",{children:e.flatMap(((e,i)=>n.jsxs("li",{className:"flex flex-row justify-between",children:[n.jsxs("a",{className:`flex flex-row gap-1 flex-wrap mb-2 align-middle ${l===e.previewUrl?"text-link":"cactus-link"} no-underline`,href:e.externalUrl,title:"View Track in Spotify",target:"_BLANK",children:[n.jsxs("span",{children:[i+1,"."]}),n.jsxs("div",{className:"flex flex-col flex-wrap flex-1",children:[n.jsx("span",{children:e.name}),n.jsxs("span",{className:"text-xs text-textColor",children:[" ",e.artists.flatMap((e=>e.name)).join(", ")]})]})]}),e.previewUrl&&n.jsx(f,{src:e.previewUrl,isPlaying:l===e.previewUrl,onPlay:()=>(e=>{if(null!==l){const e=r.current;null!==e&&(e.pause(),e.currentTime=0)}const n=new Audio(e);n.play(),s(e),r.current=n})(e.previewUrl??""),onStop:t},e.id)]},e.id)))})};export{j as default};