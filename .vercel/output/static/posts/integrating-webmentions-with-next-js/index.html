<!DOCTYPE html><html lang=en-GB><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name=viewport><meta content="IE=edge" http-equiv=X-UA-Compatible><link href=/favicon.ico rel=icon sizes=any><link href=/apple-touch-icon.png rel=apple-touch-icon><link href=/manifest.webmanifest rel=manifest><link href=https://deloughry.co.uk/posts/integrating-webmentions-with-next-js/ rel=canonical><title>Integrating Webmentions with Next.JS • Deloughry.co.uk</title><meta content="Integrating Webmentions with Next.JS • Deloughry.co.uk" name=title><meta content="Let me introduce you to Webmentions - a recent discovery that brought back memories of pingbacks and Tumblr's social features. I had to implement it myself!" name=description><meta content="Matthew Peck-Deloughry" name=author><meta content=#DDDFDF name=theme-color><meta content=article property=og:type><meta content="Integrating Webmentions with Next.JS" property=og:title><meta content="Let me introduce you to Webmentions - a recent discovery that brought back memories of pingbacks and Tumblr's social features. I had to implement it myself!" property=og:description><meta content=https://deloughry.co.uk/posts/integrating-webmentions-with-next-js/ property=og:url><meta content=Deloughry.co.uk property=og:site_name><meta content=en_GB property=og:locale><meta content=https://deloughry.co.uk/og-image/integrating-webmentions-with-next-js.png property=og:image><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content="Matthew Peck-Deloughry" property=article:author><meta content=2022-04-23T23:00:00.000Z property=article:published_time><meta content=summary_large_image property=twitter:card><meta content=https://deloughry.co.uk/posts/integrating-webmentions-with-next-js/ property=twitter:url><meta content="Integrating Webmentions with Next.JS" property=twitter:title><meta content="Let me introduce you to Webmentions - a recent discovery that brought back memories of pingbacks and Tumblr's social features. I had to implement it myself!" property=twitter:description><meta content=https://deloughry.co.uk/og-image/integrating-webmentions-with-next-js.png property=twitter:image><link href=/rss.xml rel=alternate title=Deloughry.co.uk type=application/rss+xml><script>!function(){const e={author:"Matthew Peck-Deloughry",title:"Deloughry.co.uk",description:"A little hovel of Mine",lang:"en-GB",ogLocale:"en_GB",githubUrl:"https://github.com/DR-DinoMight/deloughry-v2",themeColorLight:"#DDDFDF",themeColorDark:"#191919"},t=document.documentElement,o=document.querySelector("meta[name='theme-color']");function a(){const a="dark"===(console.log("data",typeof localStorage,localStorage.getItem("theme")),"undefined"!=typeof localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme"):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");console.log("watchTheme",a);new MutationObserver((()=>{const a=t.classList.contains("dark");o.setAttribute("content",e[a?"themeColorDark":"themeColorLight"])})).observe(t,{attributeFilter:["class"]}),t.classList.toggle("dark",a)}document.addEventListener("DOMContentLoaded",a),document.addEventListener("astro:after-swap",a)}()</script><link href=https://webmention.io/deloughry.co.uk/webmention rel=webmention><link href=https://webmention.io/deloughry.co.uk/xmlrpc rel=pingback><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><link href=/_astro/about.D-Nua4CU.css rel=stylesheet><style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-new(*),::view-transition-old(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}</style><link href=/_astro/_post_.CyfQd-72.css rel=stylesheet><script src=/_astro/hoisted.EovF1rPx.js type=module></script><script src=/_astro/page.CY1iZwUD.js type=module></script><script>window.va=window.va||function(){(window.vaq=window.vaq||[]).push(arguments)};var script=document.createElement("script");script.defer=!0,script.src="/_vercel/insights/script.js";var head=document.querySelector("head");head.appendChild(script)</script><style>[data-astro-transition-scope=astro-7ibiritp-1]{view-transition-name:post-titleintegrating-webmentions-with-next-js}@layer astro{::view-transition-old(post-titleintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-titleintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-titleintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-titleintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-7ibiritp-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-7ibiritp-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-7ibiritp-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-7ibiritp-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-7ibiritp-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-7ibiritp-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-7ibiritp-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-7ibiritp-1]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-76dyonkk-2]{view-transition-name:post-dateintegrating-webmentions-with-next-js}@layer astro{::view-transition-old(post-dateintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-dateintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-dateintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-dateintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-76dyonkk-2],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-76dyonkk-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-76dyonkk-2],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-76dyonkk-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-76dyonkk-2],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-76dyonkk-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-76dyonkk-2],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-76dyonkk-2]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-3wpscyb4-3]{view-transition-name:post-descintegrating-webmentions-with-next-js}@layer astro{::view-transition-old(post-descintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(post-descintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(post-descintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(post-descintegrating-webmentions-with-next-js){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-3wpscyb4-3],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-3wpscyb4-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-3wpscyb4-3],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-3wpscyb4-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-3wpscyb4-3],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-3wpscyb4-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-3wpscyb4-3],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-3wpscyb4-3]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-tzwrtu2g-4]{view-transition-name:header}@layer astro{::view-transition-old(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}::view-transition-new(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back]::view-transition-old(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back]::view-transition-new(header){animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-tzwrtu2g-4],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-tzwrtu2g-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-tzwrtu2g-4],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-tzwrtu2g-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-tzwrtu2g-4],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-tzwrtu2g-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeOut}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-tzwrtu2g-4],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-tzwrtu2g-4]{animation-duration:180ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both;animation-name:astroFadeIn}</style><style>[data-astro-transition-scope=astro-l7phgyim-5]{view-transition-name:now-playing}@layer astro{::view-transition-old(now-playing){animation-duration:90ms,220ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeOut,astroSlideToLeft}::view-transition-new(now-playing){animation-duration:210ms,220ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-delay:30ms;animation-fill-mode:both,both;animation-name:astroFadeIn,astroSlideFromRight}[data-astro-transition=back]::view-transition-old(now-playing){animation-name:astroFadeOut,astroSlideToRight}[data-astro-transition=back]::view-transition-new(now-playing){animation-name:astroFadeIn,astroSlideFromLeft}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-l7phgyim-5],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-l7phgyim-5]{animation-duration:90ms,220ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-fill-mode:both,both;animation-name:astroFadeOut,astroSlideToLeft}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-l7phgyim-5],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-l7phgyim-5]{animation-duration:210ms,220ms;animation-timing-function:cubic-bezier(0.76,0,0.24,1),cubic-bezier(0.76,0,0.24,1);animation-delay:30ms;animation-fill-mode:both,both;animation-name:astroFadeIn,astroSlideFromRight}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-l7phgyim-5],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-l7phgyim-5]{animation-name:astroFadeOut,astroSlideToRight}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-l7phgyim-5],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-l7phgyim-5]{animation-name:astroFadeIn,astroSlideFromLeft}</style></head><body><a href=#main class="focus:fixed focus:left-1 focus:not-sr-only focus:top-1.5 sr-only">skip to content</a><header class="flex items-center group mb-8 relative sm:pl-[4.5rem]" id=main-header><div class="flex sm:flex-col"><a href=https://deloughry.co.uk class="grayscale font-oswald hover:filter-none inline-flex items-center noj-underline sm:inline-block sm:relative" rel=author><img alt="A dino skull" src=/_astro/logo-small.Nmiy0Dm2_1DNQAO.webp aria-hidden=true class="mr-3 sm:absolute sm:left-[-4.5rem] sm:mr-0 sm:w-16 w-8" decoding=async height=130 loading=eager width=130> <span class="no-underline font-bold sm:text-2xl text-xl uppercase">Matthew Peck-Deloughry</span></a><nav aria-label="Main menu" class="sm:py-0 py-4 -inset-x-4 absolute bg-bgColor flex-col gap-y-4 group-[.menu-open]:flex group-[.menu-open]:z-50 h-screen hidden items-end rounded-md shadow sm:-ml-4 sm:backdrop-blur-none sm:bg-transparent sm:divide-accent sm:divide-dashed sm:divide-x sm:flex sm:flex-row sm:h-auto sm:items-center sm:mt-1 sm:rounded-none sm:shadow-none sm:static sm:z-auto text-accent top-14" id=navigation-menu><a href=/ class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>Home </a><a href=/about class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>About </a><a href=/posts class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>Blog </a><a href=/playlists class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>Playlists </a><a href=/projects class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>Projects </a><a href=/bookmarks class="hover:text-link px-4 py-4 sm:hover:underline sm:py-0" rel=prefetch>Bookmarks</a></nav></div><theme-toggle class=ml-auto><button aria-label="Toggle Dark Mode" class="transition-all bg-zinc-200 dark:bg-zinc-700 group h-9 hover:ring-2 p-2 relative ring-zinc-400 rounded-md w-9" id=toggle-theme type=button><svg class="transition-all -translate-x-1/2 -translate-y-1/2 absolute left-1/2 top-1/2 opacity-0 scale-0 h-7 w-7 group-aria-pressed:opacity-100 group-aria-pressed:scale-100" aria-hidden=true fill=none focusable=false stroke-width=1.5 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg id=sun-svg><path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M22 12L23 12" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M12 2V1" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M12 23V22" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M20 20L19 19" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M20 4L19 5" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M4 20L5 19" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M4 4L5 5" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M1 12L2 12" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path></svg> <svg class="transition-all -translate-x-1/2 -translate-y-1/2 absolute left-1/2 top-1/2 opacity-0 scale-0 h-7 w-7 group-aria-[pressed=false]:opacity-100 group-aria-[pressed=false]:scale-100" aria-hidden=true fill=none focusable=false stroke-width=1.5 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg id=moon-svg><circle cx=12 cy=12 r=10 stroke=currentColor stroke-width=1.5></circle><path d="M7.63262 3.06689C8.98567 3.35733 9.99999 4.56025 9.99999 6.00007C9.99999 7.65693 8.65685 9.00007 6.99999 9.00007C5.4512 9.00007 4.17653 7.82641 4.01685 6.31997" stroke=currentColor stroke-width=1.5></path><path d="M22 13.0505C21.3647 12.4022 20.4793 12 19.5 12C17.567 12 16 13.567 16 15.5C16 17.2632 17.3039 18.7219 19 18.9646" stroke=currentColor stroke-width=1.5></path><path d="M14.5 8.51L14.51 8.49889" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path><path d="M10 17C11.1046 17 12 16.1046 12 15C12 13.8954 11.1046 13 10 13C8.89543 13 8 13.8954 8 15C8 16.1046 8.89543 17 10 17Z" stroke=currentColor stroke-linecap=round stroke-linejoin=round></path></svg></button></theme-toggle><button aria-label="Open main menu" class="group relative h-7 ml-8 sm:hidden sm:invisible w-7" id=toggle-navigation-menu type=button aria-expanded=false aria-haspopup=menu><svg class="transition-all -translate-x-1/2 -translate-y-1/2 absolute left-1/2 top-1/2 h-full w-full group-aria-expanded:opacity-0 group-aria-expanded:scale-0" aria-hidden=true fill=none focusable=false stroke-width=1.5 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg id=line-svg stroke=currentColor><path d="M3.75 9h16.5m-16.5 6.75h16.5" stroke-linecap=round stroke-linejoin=round></path></svg> <svg class="text-accent absolute -translate-x-1/2 -translate-y-1/2 group-aria-expanded:opacity-100 group-aria-expanded:scale-100 h-full left-1/2 opacity-0 scale-0 top-1/2 transition-all w-full" class=text-accent aria-hidden=true fill=none focusable=false stroke-width=1.5 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg id=cross-svg stroke=currentColor><path d="M6 18L18 6M6 6l12 12" stroke-linecap=round stroke-linejoin=round></path></svg></button></header><main class=flex-1 id=main><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(self.Astro||(self.Astro={})).load=async t=>{await(await t())()},window.dispatchEvent(new Event("astro:load")),(()=>{var t,e=Object.defineProperty,r=(t,r,n)=>(((t,r,n)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n})(t,"symbol"!=typeof r?r+"":r,n),n);{let e={0:t=>i(t),1:t=>s(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(s(t)),5:t=>new Set(s(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},n=t=>{let[r,n]=t;return r in e?e[r](n):void 0},s=t=>t.map(n),i=t=>"object"!=typeof t||null===t?t:Object.fromEntries(Object.entries(t).map((([t,e])=>[t,n(e)])));customElements.get("astro-island")||customElements.define("astro-island",(t=class extends HTMLElement{constructor(){super(...arguments),r(this,"Component"),r(this,"hydrator"),r(this,"hydrate",(async()=>{var t;if(!this.hydrator||!this.isConnected)return;let e=null==(t=this.parentElement)?void 0:t.closest("astro-island[ssr]");if(e)return void e.addEventListener("astro:hydrate",this.hydrate,{once:!0});let r,n=this.querySelectorAll("astro-slot"),s={},o=this.querySelectorAll("template[data-astro-template]");for(let t of o){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(s[t.getAttribute("data-astro-template")||"default"]=t.innerHTML,t.remove())}for(let t of n){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(s[t.getAttribute("name")||"default"]=t.innerHTML)}try{r=this.hasAttribute("props")?i(JSON.parse(this.getAttribute("props"))):{}}catch(t){let e=this.getAttribute("component-url")||"<unknown>",r=this.getAttribute("component-export");throw r&&(e+=` (export ${r})`),console.error(`[hydrate] Error parsing props for component ${e}`,this.getAttribute("props"),t),t}await this.hydrator(this)(this.Component,r,s,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))})),r(this,"unmount",(()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))}))}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(this.hasAttribute("await-children")&&"interactive"!==document.readyState&&"complete"!==document.readyState){let t=()=>{document.removeEventListener("DOMContentLoaded",t),e.disconnect(),this.childrenConnectedCallback()},e=new MutationObserver((()=>{var e;(null==(e=this.lastChild)?void 0:e.nodeType)===Node.COMMENT_NODE&&"astro:end"===this.lastChild.nodeValue&&(this.lastChild.remove(),t())}));e.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",t)}else this.childrenConnectedCallback()}async childrenConnectedCallback(){let t=this.getAttribute("before-hydration-url");t&&await import(t),this.start()}async start(){let t=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(void 0!==Astro[e])try{await Astro[e]((async()=>{let t=this.getAttribute("renderer-url"),[e,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),t?import(t):()=>()=>{}]),n=this.getAttribute("component-export")||"default";if(n.includes(".")){this.Component=e;for(let t of n.split("."))this.Component=this.Component[t]}else this.Component=e[n];return this.hydrator=r,this.hydrate}),t,this)}catch(t){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,t)}else window.addEventListener(`astro:${e}`,(()=>this.start()),{once:!0})}attributeChangedCallback(){this.hydrate()}},r(t,"observedAttributes",["props"]),t))}})()</script><astro-island await-children="" client=load component-export=default component-url=/_astro/NowPlaying.PvKf4MFA.js data-astro-transition-persist=now-playing data-astro-transition-scope=astro-l7phgyim-5 opts={&quot;name&quot;:&quot;NowPlaying&quot;,&quot;value&quot;:true} prefix=r0 props={&quot;data-astro-transition-persist&quot;:[0,&quot;now-playing&quot;],&quot;data-astro-transition-scope&quot;:[0,&quot;astro-l7phgyim-5&quot;]} renderer-url=/_astro/client.Cvlxmu5W.js ssr="" uid=ZWnTDO><div class="transition-all align-middle duration-250 ease-in-out flex flex-col invisible justify-center"><p class=min-h-[102px]>Spotify Not Playing</p></div></astro-island><div class="sm:gap-x-10 sm:grid sm:grid-cols-[5fr] sm:grid-flow-col sm:items-start"><article class="break-words h-entry"><div id=blog-hero><h1 class="p-name title" data-astro-transition-scope=astro-7ibiritp-1>Integrating Webmentions with Next.JS</h1><a href=https://deloughry.co.uk/posts/integrating-webmentions-with-next-js/ class=u-url><time class=dt-published data-astro-transition-scope=astro-76dyonkk-2 datetime=2022-04-23T23:00:00.000Z>2022-04-23T23:00:00.000Z</time></a><div class="before:content-['|'] inline"><svg class="h-6 w-6 inline-block" aria-hidden=true fill=none focusable=false stroke-width=1.5 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg stroke=currentColor stroke-linecap=round stroke-linejoin=round><path d="M0 0h24v24H0z" stroke=none fill=none></path><path d="M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"></path><path d="M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"></path><path d="M6 9h-.01"></path></svg> <a href=/tags/til class="cactus-link before:content-['#'] inline-block" aria-label="View more blogs with the tag til">til</a></div><p class="border-accent border-l-4 mt-8 pl-4 text-lg" data-astro-transition-scope=astro-3wpscyb4-3>Let me introduce you to Webmentions - a recent discovery that brought back memories of pingbacks and Tumblr&#39;s social features. I had to implement it myself!</p></div><div class="max-w-3xl prose prose-cactus prose-heading:before:mr-4 prose-headings:before:content-['#'] prose-headings:before:flex-row prose-headings:before:text-accent prose-headings:font-semibold prose-sm prose-th:before:content-none w-full"><blockquote><p>As with all my technical documents, I like to preface the articles, that I don’t pretend to be a master in said topic, nor always do stuff the best way, these articles are here as a documentation of my exploration, and if you find this useful then awesome! If you see something you want to discuss please hit me up on twitter as I’m always up for a good chat!</p></blockquote><p>Recently I had a few days off from work and what do I do? I found myself coding more and more features on the website…You know what I do for a living, doh! But regardless I found myself having tons of fun and knocked out a blog post (<a href=https://deloughry.co.uk/logs/using-mongodb-s-data-api-next-js-with-swr-to-make-a-page-click-tracker>Using MongoDB’s Data API, Next.js with SWR to make a pack click tracker</a>), next I read about <a href=https://www.w3.org/TR/webmention/ >Webmentions</a> and suddenly was hit with a major case of nostalgia of the days of pingbacks and the days of seeing the long list of likes, shares and reposts on Tumblr (Yes! I was one of those angsty teenagers 😛).</p><p>Well, I had to implement it, and after doing some digging I found an awesome <a href=https://aboutmonica.com/blog/getting-started-with-webmention-next-js/ >article</a> by <a href=https://aboutmonica.com>Monica Powel</a> where they documented a recent stream of <a href=https://www.learnwithjason.dev/webmention-next-js>Jason Lengstorf’s Learn with Jason</a> on stream to build Webmentions into a Next.js and Netlify starter kit, I recommend that you start there if you want to learn more about <a href=https://aboutmonica.com/blog/getting-started-with-webmention-next-js/ >Getting Started with Webmention in Next Js</a> that’s what I did, and here I’m just going to also document the modifications and tweaks I did to get it working how I wanted.</p><h2 id=getting-started-with-webmentions>Getting started with Webmentions</h2><p>As mentioned in Monica’s article the best way currently to get started is by using <a href=https://webmention.io>webmention.io</a> this is a hosted service that will handle all the incoming (and outgoing) Webmentions, so you don’t have to build a service yourself (If people are interested I will happily look at what it take to host your own service). Alongside <a href=http://webmention.io>webmention.io</a> if you want to also include social media such as Twitter, GitHub (yes there’s a social aspect to it too 😛) we also want to use <a href=https://brid.gy/ >Bridgy</a> This will do all the work of trawling each platform for any mentions, likes and reposts and convert them into Webmention format and post them to you if even does historical links too!</p><h3 id=setting-up-webmentionio>Setting up <a href=http://webmention.io>webmention.io</a></h3><p>How I got started with <a href=http://Webmention.io>webmention.io</a> was pretty simple, all I had to do was to make sure I had either a Twitter or Github link to my respective profile on the homepage which I already had, so all that meant was that I just had to alter the existing social links and just add <code>rel=‘me’</code> to both GitHub and Twitter links (it’s also worth mentioning that you need the links that social bios provide to link to the site you are wanting to use Webmention on). Once I pushed the changes live I went back into <a href="undefined">webmention.io</a> and tried to authenticate again, this time it took me to the dashboard that enabled me to log into the dashboard ready for implementation.</p><p>Once I met all the requirements, <a href=http://Webmentions.io>webmention.io</a> then required me to then add some links to the Head of my website’s layout :</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e4f0fb>&lt;</span><span style=color:#5de4c7>link</span><span style=color:#5fb3a1;font-style:italic> rel</span><span style=color:#a6accd>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>webmention</span><span style=color:#a6accd>&quot;</span><span style=color:#5fb3a1;font-style:italic> href</span><span style=color:#a6accd>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://webmention.io/[USERNAME]/webmention</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb> /&gt;</span></span>
<span class=line><span style=color:#e4f0fb>&lt;</span><span style=color:#5de4c7>link</span><span style=color:#5fb3a1;font-style:italic> rel</span><span style=color:#a6accd>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>pingback</span><span style=color:#a6accd>&quot;</span><span style=color:#5fb3a1;font-style:italic> href</span><span style=color:#a6accd>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://webmention.io/[USERNAME]/xmlrpc</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb> /&gt;</span></span></code></pre><p>Navigating to one of these URLs you can see it is a simple form that will allow other sites, the ability to notify the site of a Webmention, or in the case of the second link the ability to use the old Pingback functionality with the newer Webmention standard.</p><h3 id=setting-up-bridgy>Setting up Bridgy</h3><p>So I, like many create tweets about posts and projects I do on Twitter, so being able to gain insights into the chatter about this, would be very brilliant and that’s where <a href=https://brid.gy/ >Bridgy</a> comes in this will do all the scraping for you and post the relevant mentions off to your Webmention implementation. To do this all you need to do is sign in and authorise Bridgy to see your timeline and profile to be able to investigate the relevant posts. Bridgy will require you to also make sure that the website in question is linked in your Bios.</p><p>Once set up you have the ability to see all the responses and manually crawl your currently logged in profile for any mentions, like in the example below.</p><p><img alt="Screenshot of the Brdgy Dashboard show controls to Poll websites, along with a table of results" src=https://cdn.sanity.io/images/airrvxef/production/f2c50aef4dd36c14d4c7ec9590ad375fb0f741c1-1272x522.png /></p><h2 id=outputting-the-data-to-your-website>Outputting the data to your website</h2><p>For a basic output of all the mentions on one page (which is what I recommend to start with) I’ll point you to Monica’s section about implementing it into a React/Next.js site <a href=https://aboutmonica.com/blog/getting-started-with-webmention-next-js/#fetching-and-rendering-webmentions>here</a>, this does an awesome job of getting you up and running.</p><p>Once I had implemented the above, I then had time to sit back and think of other possibilities and different techniques I could use.</p><ul><li>Somehow tailor the output that I could display the Webmentions that relate to a certain page rather than just grabbing them all. - <strong>Implemented</strong></li><li>Tailor the output further to separate the comments/chatter, likes and reposts so that I can visually represent them on the website.- <strong>Implemented</strong></li><li>Or cache the output so that rather than pulling the mentions on the client side I could actually pull them and process them at build, or even Server Side Rendered. <strong>- TODO</strong></li><li>and could I possibly store the mentions in a database for historical purposes. <strong>- TODO</strong></li></ul><p>Now currently I’ve only implemented two of the following, but I do plan on adding or at least exploring the idea of the last two points above and maybe doing a follow up when I come to actually implement it.</p><h3 id=display-mentions-per-page>Display mentions per page.</h3><p>So using the above I managed to get a basic list of mentions rendered to a page, but what about per page? I was thinking of all the ways I could go about this, the one I settled on is to create a separate effect file that I could then pass and optional parameter to that would allow me to go off and get all Webmentions for the entire site or go off and query just the URL in question.</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#5de4c7>import </span><span style=color:#a6accd>{</span><span style=color:#add7ff> useEffect</span><span style=color:#a6accd>,</span><span style=color:#add7ff> useState</span><span style=color:#a6accd> }</span><span style=color:#a6accd> from</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>react</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4c7>export</span><span style=color:#91b4d5> const</span><span style=color:#add7ff> useWebMentions</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> (</span><span style=color:#e4f0fb>url</span><span style=color:#91b4d5>?:</span><span style=color:#a6aCCDC0> string</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#91b4d5>	const</span><span style=color:#a6accd> [</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>, </span><span style=color:#e4f0fb>setMentions</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>=</span><span style=color:#e4f0FBD0> useState</span><span style=color:#a6accd>&lt;</span><span style=color:#a6aCCDC0>any</span><span style=color:#a6accd>&gt;(</span><span style=color:#d0679d>undefined</span><span style=color:#a6accd>);</span></span>
<span class=line><span style=color:#e4f0FBD0>	useEffect</span><span style=color:#a6accd>(() </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#91b4d5>		const</span><span style=color:#e4f0fb> wmUrl</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>https://webmention.io/api/mentions.jf2?[USERNAME]&amp;token=[TOKEN]</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#767C9DB0;font-style:italic>		// Check if the url has been passed, if so use as the target url otherwise get all mentions</span></span>
<span class=line><span style=color:#91b4d5>		const</span><span style=color:#e4f0fb> target</span><span style=color:#91b4d5> =</span><span style=color:#e4f0fb> url</span><span style=color:#91b4d5> ?</span><span style=color:#a6accd> `${</span><span style=color:#e4f0fb>wmUrl</span><span style=color:#a6accd>}</span><span style=color:#5de4c7>&amp;target=</span><span style=color:#a6accd>${</span><span style=color:#e4f0fb>url</span><span style=color:#a6accd>}`</span><span style=color:#91b4d5> :</span><span style=color:#e4f0fb> wmUrl</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#e4f0FBD0>		fetch</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>target</span><span style=color:#a6accd>)</span></span>
<span class=line><span style=color:#a6accd>			.</span><span style=color:#e4f0FBD0>then</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>response</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#e4f0fb> response</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>json</span><span style=color:#a6accd>())</span></span>
<span class=line><span style=color:#a6accd>			.</span><span style=color:#e4f0FBD0>then</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#a6accd>				if (</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>) {</span></span>
<span class=line><span style=color:#e4f0FBD0>					setMentions</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>);</span></span>
<span class=line><span style=color:#a6accd>				}</span></span>
<span class=line><span style=color:#a6accd>			});</span></span>
<span class=line><span style=color:#a6accd>	}, []);</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4C7C0>	return</span><span style=color:#e4f0fb> mentions</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#a6accd>};</span></span></code></pre><p>This allowed me to then use this in a component to just stick on every page I want to display Webmentions, now I know this is most efficient but as proof of concept, I think having it load on the client-side isn’t too bad, especially for me when this will be going on the bottom of log posts where it’ll be at the bottom of large pieces of content so by the time the user gets to it, it should have loaded.</p><p>As for the component, I wanted to separate the likes and reposts from any mentions so I went ahead and tweaked the above code further.</p><h3 id=separate-likes-reposts-and-chatter>Separate Likes, Reposts and Chatter</h3><p>I ended up producing something as followed, and again it’s not the most efficient, but it allowed me to quickly separate the comments out and give me that quick dopamine hit it being able to see the likes at a quick glance 😛</p><p><img alt="Example output of a custom webcomponents showing 7 likes along with avatars and 0 repost and 1 comment" src=https://cdn.sanity.io/images/airrvxef/production/5f5a034cae7efd0002fe25664bfdb4a92172bc1b-1187x569.png /></p><p>To do this I create a new Component and altered the Effect hook slightly to allow me to better split the content out.</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#5de4c7>import </span><span style=color:#a6accd>{</span><span style=color:#add7ff> useEffect</span><span style=color:#a6accd>,</span><span style=color:#add7ff> useState</span><span style=color:#a6accd> }</span><span style=color:#a6accd> from</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>react</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4c7>export</span><span style=color:#91b4d5> type</span><span style=color:#a6accd> WebMentionsCollection</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#add7ff>	likes</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> any</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#add7ff>	reposts</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> any</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#add7ff>	mentions</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> any</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#a6accd>};</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4c7>export</span><span style=color:#91b4d5> const</span><span style=color:#add7ff> useWebMentions</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> (</span><span style=color:#e4f0fb>url</span><span style=color:#91b4d5>?:</span><span style=color:#a6aCCDC0> string</span><span style=color:#a6accd>)</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> WebMentionsCollection</span><span style=color:#91b4d5> =&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#91b4d5>	const</span><span style=color:#a6accd> [</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>, </span><span style=color:#e4f0fb>setMentions</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>=</span><span style=color:#e4f0FBD0> useState</span><span style=color:#a6accd>&lt;</span><span style=color:#a6aCCDC0>WebMentionsCollection</span><span style=color:#91b4d5> |</span><span style=color:#a6aCCDC0> undefined</span><span style=color:#a6accd>&gt;(</span><span style=color:#d0679d>undefined</span><span style=color:#a6accd>);</span></span>
<span class=line><span style=color:#e4f0FBD0>	useEffect</span><span style=color:#a6accd>(() </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#91b4d5>		const</span><span style=color:#e4f0fb> wmUrl</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>https://webmention.io/api/mentions.jf2?[USERNAME]&amp;token=[TOKEN]</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#767C9DB0;font-style:italic>		// Check if the url has been passed, if so use as the target url otherwise get all mentions</span></span>
<span class=line><span style=color:#91b4d5>		const</span><span style=color:#e4f0fb> target</span><span style=color:#91b4d5> =</span><span style=color:#e4f0fb> url</span><span style=color:#91b4d5> ?</span><span style=color:#a6accd> `${</span><span style=color:#e4f0fb>wmUrl</span><span style=color:#a6accd>}</span><span style=color:#5de4c7>&amp;target=</span><span style=color:#a6accd>${</span><span style=color:#e4f0fb>url</span><span style=color:#a6accd>}`</span><span style=color:#91b4d5> :</span><span style=color:#e4f0fb> wmUrl</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#e4f0FBD0>		fetch</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>target</span><span style=color:#a6accd>)</span></span>
<span class=line><span style=color:#a6accd>			.</span><span style=color:#e4f0FBD0>then</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>response</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#e4f0fb> response</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>json</span><span style=color:#a6accd>())</span></span>
<span class=line><span style=color:#a6accd>			.</span><span style=color:#e4f0FBD0>then</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#a6accd>				if (</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>) {</span></span>
<span class=line><span style=color:#91b4d5>					const</span><span style=color:#e4f0fb> mentionsWithoutLikeOrReposts</span><span style=color:#91b4d5> =</span><span style=color:#e4f0fb> mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>filter</span><span style=color:#a6accd>(</span></span>
<span class=line><span style=color:#a6accd>						(</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>!==</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>like-of</span><span style=color:#a6accd>&quot;</span><span style=color:#91b4d5> &amp;&amp;</span><span style=color:#e4f0fb> mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>!==</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>repost-of</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#a6accd>					);</span></span>
<span class=line><span style=color:#91b4d5>					const</span><span style=color:#e4f0fb> totalLike</span><span style=color:#91b4d5> =</span><span style=color:#e4f0fb> mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>filter</span><span style=color:#a6accd>(</span></span>
<span class=line><span style=color:#a6accd>						(</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#e4f0fb> mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>===</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>like-of</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#a6accd>					);</span></span>
<span class=line><span style=color:#91b4d5>					const</span><span style=color:#e4f0fb> totalRepost</span><span style=color:#91b4d5> =</span><span style=color:#e4f0fb> mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>children</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>filter</span><span style=color:#a6accd>(</span></span>
<span class=line><span style=color:#a6accd>						(</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#e4f0fb> mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>] </span><span style=color:#91b4d5>===</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>repost-of</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#a6accd>					);</span></span>
<span class=line></span>
<span class=line><span style=color:#91b4d5>					const</span><span style=color:#e4f0fb> webMentions</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> WebMentionsCollection</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#add7ff>						likes</span><span style=color:#a6accd>:</span><span style=color:#e4f0fb> totalLike</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>						reposts</span><span style=color:#a6accd>:</span><span style=color:#e4f0fb> totalRepost</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>						mentions</span><span style=color:#a6accd>:</span><span style=color:#e4f0fb> mentionsWithoutLikeOrReposts</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>					};</span></span>
<span class=line><span style=color:#e4f0FBD0>					setMentions</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>webMentions</span><span style=color:#a6accd>);</span></span>
<span class=line><span style=color:#a6accd>				}</span></span>
<span class=line><span style=color:#a6accd>			});</span></span>
<span class=line><span style=color:#a6accd>	}, []);</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4C7C0>	return</span><span style=color:#e4f0fb> mentions</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#a6accd>};</span></span></code></pre><p>Doing this allowed to pass and object back that had the <code>mentions</code>, <code>likes</code> and <code>reposts</code> to display separately, so the next step was to create a Component that allowed me to style and layout exactly as I wanted above.</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#5de4c7>import </span><span style=color:#a6accd>{</span><span style=color:#add7ff> useWebMentions</span><span style=color:#a6accd>,</span><span style=color:#add7ff> WebMentionsCollection</span><span style=color:#a6accd> }</span><span style=color:#a6accd> from</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>../hooks/useWebMentions</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#5de4c7>import </span><span style=color:#a6accd>{</span><span style=color:#add7ff> stripDomainFromString</span><span style=color:#a6accd> }</span><span style=color:#a6accd> from</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>../helpers/TextHelpers</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>;</span></span>
<span class=line></span>
<span class=line><span style=color:#5de4c7>export default </span><span style=color:#91b4d5>function</span><span style=color:#add7ff> WebMentions</span><span style=color:#a6accd>({</span><span style=color:#e4f0fb> url</span><span style=color:#a6accd>,</span><span style=color:#e4f0fb> className</span><span style=color:#a6accd> }</span><span style=color:#91b4d5>:</span><span style=color:#a6accd> {</span><span style=color:#5de4c7> url</span><span style=color:#91b4d5>?:</span><span style=color:#a6aCCDC0> string</span><span style=color:#a6accd>;</span><span style=color:#5de4c7> className</span><span style=color:#91b4d5>?:</span><span style=color:#a6aCCDC0> string</span><span style=color:#a6accd> })</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#91b4d5>	const</span><span style=color:#e4f0fb> webMentions</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> WebMentionsCollection</span><span style=color:#91b4d5> =</span><span style=color:#e4f0FBD0> useWebMentions</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>url</span><span style=color:#a6accd>);</span></span>
<span class=line></span>
<span class=line><span style=color:#91b4d5>	const</span><span style=color:#e4f0fb> mentionTypes</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#5de4c7>in-reply-to</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Replied</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#5de4c7>bookmark-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Bookmarked</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#5de4c7>mention-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Mentioned</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>		rsvp</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>RSVPed</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	};</span></span>
<span class=line></span>
<span class=line><span style=color:#a6accd>	if</span><span style=color:#a6accd> (</span><span style=color:#e4f0fb>webMentions</span><span style=color:#a6accd>)</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#5de4C7C0>		return</span><span style=color:#a6accd> (</span></span>
<span class=line><span style=color:#e4f0fb>			&lt;&gt;</span></span>
<span class=line><span style=color:#e4f0fb>				&lt;</span><span style=color:#5de4c7>div</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mt-5 grid grid-cols-1 gap-5 lg:grid-cols-2</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;</span><span style=color:#5de4c7>span</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mb-4 flex flex-row</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>svg</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-red mr-2 h-6 w-6</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								fill</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>none</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								stroke</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>currentColor</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								viewBox</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>0 0 24 24</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								xmlns</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>http://www.w3.org/2000/svg</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>							&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>path</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeLinecap</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeLinejoin</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeWidth</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#5de4c7>2</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									d</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>								/&gt;{</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd> &quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;/</span><span style=color:#5de4c7>svg</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>p</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-red</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>span</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-white</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;Likes&lt;/</span><span style=color:#5de4c7>span</span><span style=color:#e4f0fb>&gt; {webMentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>likes</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>length}</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;/</span><span style=color:#5de4c7>p</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;/</span><span style=color:#5de4c7>span</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;</span><span style=color:#5de4c7>ul</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>flex flex-row </span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							{webMentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>likes</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>map</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>like</span><span style=color:#a6accd>,</span><span style=color:#e4f0fb> index</span><span style=color:#a6accd>)</span><span style=color:#91b4d5> =&gt;</span><span style=color:#a6accd> (</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>li</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mr-2</span><span style=color:#a6accd>&quot;</span><span style=color:#91b4d5;font-style:italic> key</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{index}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;</span><span style=color:#5de4c7>a</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>url}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										title</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name}</span></span>
<span class=line><span style=color:#e4f0fb>									&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>img</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											src</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>photo}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											alt</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>`</span><span style=color:#5de4c7>Avatar for </span><span style=color:#a6accd>${</span><span style=color:#e4f0fb>like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name</span><span style=color:#a6accd>}`</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>border-red h-10 w-10  rounded-full border-2</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;/</span><span style=color:#5de4c7>li</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#a6accd>							))</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;/</span><span style=color:#5de4c7>ul</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;/</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;</span><span style=color:#5de4c7>span</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mb-4 flex flex-row</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>svg</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-terminal-green h-6 w-6</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								fill</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>none</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								stroke</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>currentColor</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								viewBox</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>0 0 24 24</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								xmlns</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>http://www.w3.org/2000/svg</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>							&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>path</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeLinecap</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeLinejoin</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									strokeWidth</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#5de4c7>2</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>									d</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>								/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;/</span><span style=color:#5de4c7>svg</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>p</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-terminal-green ml-2</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>span</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-white</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;Reposts&lt;/</span><span style=color:#5de4c7>span</span><span style=color:#e4f0fb>&gt; {webMentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>reposts</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>length}</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;/</span><span style=color:#5de4c7>p</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;/</span><span style=color:#5de4c7>span</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;</span><span style=color:#5de4c7>ul</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>flex flex-row </span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							{webMentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>reposts</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>map</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>like</span><span style=color:#a6accd>,</span><span style=color:#e4f0fb> index</span><span style=color:#a6accd>)</span><span style=color:#91b4d5> =&gt;</span><span style=color:#a6accd> (</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>li</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mr-2</span><span style=color:#a6accd>&quot;</span><span style=color:#91b4d5;font-style:italic> key</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{index}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;</span><span style=color:#5de4c7>a</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>url}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										title</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name}</span></span>
<span class=line><span style=color:#e4f0fb>									&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>img</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											src</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>photo}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											alt</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>`</span><span style=color:#5de4c7>Avatar for </span><span style=color:#a6accd>${</span><span style=color:#e4f0fb>like</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name</span><span style=color:#a6accd>}`</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>border-terminal-green h-10 w-10  rounded-full border-2</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;/</span><span style=color:#5de4c7>li</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#a6accd>							))</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;/</span><span style=color:#5de4c7>ul</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;/</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>				&lt;/</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>				&lt;</span><span style=color:#5de4c7>div</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mt-6</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;</span><span style=color:#5de4c7>h4</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>flex flex-row</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;</span><span style=color:#5de4c7>svg</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>							className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-purple mr-2 h-6 w-6</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>							fill</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>none</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>							stroke</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>currentColor</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>							viewBox</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>0 0 24 24</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>							xmlns</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>http://www.w3.org/2000/svg</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>						&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>path</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								strokeLinecap</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								strokeLinejoin</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								strokeWidth</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#5de4c7>2</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								d</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>							/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						&lt;/</span><span style=color:#5de4c7>svg</span><span style=color:#e4f0fb>&gt;{</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd> &quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>						Mentions</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;/</span><span style=color:#5de4c7>h4</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;</span><span style=color:#5de4c7>ul</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mt-4 flex flex-col </span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>						{webMentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>mentions</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>map</span><span style=color:#a6accd>((</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>,</span><span style=color:#e4f0fb> index</span><span style=color:#a6accd>)</span><span style=color:#91b4d5> =&gt;</span><span style=color:#a6accd> (</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;</span><span style=color:#5de4c7>li</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								key</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{index}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>								className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>bg-black-300 border-purple duration-400 mb-4 overflow-hidden rounded-lg border-4 px-4 py-5 shadow transition-all sm:p-6</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>							&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>span</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>items item-center mb-6 flex flex-row align-middle</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;</span><span style=color:#5de4c7>a</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>url}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										title</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name}</span></span>
<span class=line><span style=color:#e4f0fb>									&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>img</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											src</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>photo}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											alt</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>`</span><span style=color:#5de4c7>Avatar for </span><span style=color:#a6accd>${</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name</span><span style=color:#a6accd>}`</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>border-purple h-10 w-10 rounded-full border-2</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;</span><span style=color:#5de4c7>p</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>ml-2 self-center</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>a</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>url}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											title</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name}</span></span>
<span class=line><span style=color:#e4f0fb>										&gt;</span></span>
<span class=line><span style=color:#e4f0fb>											{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>name}</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;{</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd> &quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										{mentionTypes</span><span style=color:#a6accd>[</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>]]</span><span style=color:#e4f0fb>} on{</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd> &quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>time</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>font-bold</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>											{</span><span style=color:#5de4c7>new</span><span style=color:#e4f0FBD0> Date</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>published</span><span style=color:#a6accd>).</span><span style=color:#e4f0FBD0>toLocaleDateString</span><span style=color:#a6accd>(</span><span style=color:#d0679d>undefined</span><span style=color:#a6accd>,</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#add7ff>												year</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>numeric</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>												month</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>short</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>												day</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>numeric</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>											})</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;/</span><span style=color:#5de4c7>time</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;/</span><span style=color:#5de4c7>p</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#e4f0fb>									&lt;</span><span style=color:#5de4c7>a</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>url}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-purple ml-4 self-center text-xs italic</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>										title</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>Original Source</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>									&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>svg</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											className</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>h-4 w-4</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											fill</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>none</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											stroke</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>currentColor</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											viewBox</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>0 0 24 24</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>											xmlns</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>http://www.w3.org/2000/svg</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>										&gt;</span></span>
<span class=line><span style=color:#e4f0fb>											&lt;</span><span style=color:#5de4c7>path</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>												strokeLinecap</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>												strokeLinejoin</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>round</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>												strokeWidth</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#5de4c7>2</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#91b4d5;font-style:italic>												d</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#e4f0fb>											/&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;/</span><span style=color:#5de4c7>svg</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;/</span><span style=color:#5de4c7>span</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>									{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>content </span><span style=color:#91b4d5>?</span><span style=color:#e4f0fb> &lt;</span><span style=color:#5de4c7>p</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>mb-6</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}&gt;&quot;{mention</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>content</span><span style=color:#a6accd>.</span><span style=color:#e4f0fb>text}&quot;&lt;/</span><span style=color:#5de4c7>p</span><span style=color:#e4f0fb>&gt; </span><span style=color:#91b4d5>:</span><span style=color:#d0679d> null</span><span style=color:#e4f0fb>}</span></span>
<span class=line></span>
<span class=line><span style=color:#e4f0fb>									{</span><span style=color:#91b4d5>!</span><span style=color:#e4f0fb>url </span><span style=color:#91b4d5>?</span><span style=color:#a6accd> (</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;</span><span style=color:#5de4c7>small</span><span style=color:#91b4d5;font-style:italic> className</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>text-purple text-xs italic</span><span style=color:#a6accd>&quot;</span><span style=color:#e4f0fb>}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>											..about the page{</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd> &quot;</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>											&lt;</span><span style=color:#5de4c7>a</span><span style=color:#91b4d5;font-style:italic> target</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>_blank</span><span style=color:#a6accd>&quot;</span><span style=color:#91b4d5;font-style:italic> rel</span><span style=color:#91b4d5>=</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>noopener noreferrer</span><span style=color:#a6accd>&quot;</span><span style=color:#91b4d5;font-style:italic> href</span><span style=color:#91b4d5>=</span><span style=color:#e4f0fb>{mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-target</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>]</span><span style=color:#e4f0fb>}&gt;</span></span>
<span class=line><span style=color:#e4f0fb>												{</span><span style=color:#e4f0FBD0>stripDomainFromString</span><span style=color:#a6accd>(</span><span style=color:#e4f0fb>mention</span><span style=color:#a6accd>[</span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>wm-target</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>])</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>											&lt;/</span><span style=color:#5de4c7>a</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>										&lt;/</span><span style=color:#5de4c7>small</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#a6accd>									)</span><span style=color:#91b4d5> :</span><span style=color:#d0679d> null</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>								&lt;/</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>							&lt;/</span><span style=color:#5de4c7>li</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#a6accd>						))</span><span style=color:#e4f0fb>}</span></span>
<span class=line><span style=color:#e4f0fb>					&lt;/</span><span style=color:#5de4c7>ul</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>				&lt;/</span><span style=color:#5de4c7>div</span><span style=color:#e4f0fb>&gt;</span></span>
<span class=line><span style=color:#e4f0fb>			&lt;/&gt;</span></span>
<span class=line><span style=color:#a6accd>		);</span></span>
<span class=line><span style=color:#a6accd>	}</span></span>
<span class=line><span style=color:#5de4C7C0>	return</span><span style=color:#e4f0fb> &lt;&gt;&lt;/&gt;</span><span style=color:#a6accd>;</span></span>
<span class=line><span style=color:#a6accd>}</span></span></code></pre><p>Hopefully, this is pretty self-explanatory, There are a few bits here that I think would be good to explain further.</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#91b4d5>const</span><span style=color:#e4f0fb> mentionTypes</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#5de4c7>in-reply-to</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Replied</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#5de4c7>bookmark-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Bookmarked</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#5de4c7>mention-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>Mentioned</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#add7ff>	rsvp</span><span style=color:#a6accd>:</span><span style=color:#a6accd> &quot;</span><span style=color:#5de4c7>RSVPed</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>};</span></span></code></pre><p>Even though we are handling Likes and Reposts, Webmentions can also be a variety of other types that I wanted to display in a list rather than just an avatar and a counter, the snippet above allowed me to create a lookup table that depending on the type I could display a readable format of what action a user had taken on the mention.</p><p>The next bit I’d like to mention is the <code>stripDomainFromString</code> the function I used for the source URL. As I am displaying Webmentions on individual posts, but also as a collective on the <a href=https://deloughry.co.uk/stats>~/stats</a> page I still wanted a way to associate a mention to a page so that the response didn’t get lost and you could always attribute it to a post. The payload that a Webmention sends across contains a <code>wm-target</code> attribute that contains the URL that is referenced in the Webmention.</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#a6accd>{</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>type</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>entry</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>author</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: {</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#add7ff>type</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>card</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#add7ff>name</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>🧑‍⚕️_🦖🧨 - Matthew Peck-Deloughry</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#add7ff>photo</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://webmention.io/avatar/pbs.twimg.com/817f965c9121121359d91070628098de15e776dfd398fdd335411b37f521a043.jpg</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>		&quot;</span><span style=color:#add7ff>url</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://twitter.com/DR_DinoMight</span><span style=color:#a6accd>&quot;</span></span>
<span class=line><span style=color:#a6accd>	},</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>url</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://twitter.com/DR_DinoMight/status/1516891049842642948#favorited-by-9951422</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>published</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#5de4c7>null</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-received</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>2022-04-22T13:37:04Z</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-id</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#5de4c7>1384738</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-source</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://brid.gy/like/twitter/DR_DinoMight/1516891049842642948/9951422</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-target</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://deloughry.co.uk/logs/using-mongodb-s-data-api-next-js-with-swr-to-make-a-page-click-tracker</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>like-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>https://deloughry.co.uk/logs/using-mongodb-s-data-api-next-js-with-swr-to-make-a-page-click-tracker</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-property</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#a6accd>&quot;</span><span style=color:#5de4c7>like-of</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>,</span></span>
<span class=line><span style=color:#a6accd>	&quot;</span><span style=color:#e4f0fb>wm-private</span><span style=color:#a6accd>&quot;</span><span style=color:#a6accd>: </span><span style=color:#5de4c7>false</span></span>
<span class=line><span style=color:#a6accd>}</span></span></code></pre><p>So taking this I decided if I just chop off the domain I could just output that URL to give some context and a link if people are interested in reading more.</p><p>And the <code>stripDomainFromString</code> is a simple function that just removes the domain</p><pre class="astro-code poimandres" style=background-color:#1b1e28;color:#a6accd;overflow-x:auto tabindex=0><code><span class=line><span style=color:#767C9DB0;font-style:italic>// Grab the path from the url string</span></span>
<span class=line><span style=color:#5de4c7>export</span><span style=color:#91b4d5> const</span><span style=color:#add7ff> stripDomainFromString</span><span style=color:#91b4d5> =</span><span style=color:#a6accd> (</span><span style=color:#e4f0fb>url</span><span style=color:#91b4d5>:</span><span style=color:#a6aCCDC0> string</span><span style=color:#a6accd>) </span><span style=color:#91b4d5>=&gt;</span><span style=color:#a6accd> {</span></span>
<span class=line><span style=color:#5de4C7C0>	return</span><span style=color:#e4f0fb> url</span><span style=color:#a6accd>.</span><span style=color:#e4f0FBD0>replace</span><span style=color:#a6accd>(</span><span style=color:#a6accd>/^</span><span style=color:#5fb3a1>https</span><span style=color:#91b4d5>?</span><span style=color:#5fb3a1>:\/\/</span><span style=color:#a6accd>[</span><span style=color:#91b4d5>^</span><span style=color:#5fb3a1>\/</span><span style=color:#a6accd>]</span><span style=color:#91b4d5>+</span><span style=color:#a6accd>/</span><span style=color:#a6accd>, </span><span style=color:#a6accd>&quot;&quot;</span><span style=color:#a6accd>);</span></span>
<span class=line><span style=color:#a6accd>};</span></span></code></pre><h2 id=conclusion>Conclusion</h2><p>There you have it, this is how I implemented Webmentions on my website, I will be expanding this functionality as time goes on, as mentioned I’d love to store these in a Mongo DB to be able to store the interactions for prosperity’s sake, but also as part of a way to make the webmentions get loaded at the server level to alleviate the load on the client.</p><p>Another area that will be needed to be looked at some point and that’s some form of pagination, <a href=http://webmention.io>webmention.io</a> do offer some functionality for this in the form of tacking on by using the <code>per-page</code> and <code>page</code> API calls, this is something that I don’t really need just yet for my pokey lil’ site, but it is a bit of functionality that is better to have than not.</p><p>Well, I hope you found this useful and as always if you’d like to discuss this hit me up on Twitter and maybe even reference this URL to use the lovely Webmention functionality 😀</p></div></article><aside class="sm:block hidden sm:sticky sm:top-20 text-right"><h2 class=font-semibold>Table of Contents</h2><ul class="mt-4 space-y-5 text-xs"><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#getting-started-with-webmentions aria-label="Scroll to section: Getting started with Webmentions"># Getting started with Webmentions</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#setting-up-webmentionio aria-label="Scroll to section: Setting up webmention.io"># Setting up webmention.io</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#setting-up-bridgy aria-label="Scroll to section: Setting up Bridgy"># Setting up Bridgy</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#outputting-the-data-to-your-website aria-label="Scroll to section: Outputting the data to your website"># Outputting the data to your website</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#display-mentions-per-page aria-label="Scroll to section: Display mentions per page."># Display mentions per page.</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#separate-likes-reposts-and-chatter aria-label="Scroll to section: Separate Likes, Reposts and Chatter"># Separate Likes, Reposts and Chatter</a></li><li class="hover:text-link font-bold font-oswald line-clamp-2 text-accent uppercase"><a href=#conclusion aria-label="Scroll to section: Conclusion"># Conclusion</a></li></ul></aside></div><button aria-label="Back to Top" class="transition-all opacity-0 bg-zinc-200 border-2 border-transparent bottom-8 dark:bg-zinc-700 data-[show=true]:opacity-100 data-[show=true]:translate-y-0 duration-300 fixed flex h-10 hover:border-zinc-400 items-center justify-center right-4 rounded-full sm:h-12 sm:right-8 sm:w-12 text-3xl translate-y-28 w-10 z-90" id=to-top-btn data-show=false><svg class="h-6 w-6" aria-hidden=true fill=none focusable=false stroke-width=2 viewBox="0 0 24 24" xmlns=http://www.w3.org/2000/svg stroke=currentColor><path d="M4.5 15.75l7.5-7.5 7.5 7.5" stroke-linecap=round stroke-linejoin=round></path></svg></button></main><footer class="flex items-center justify-center align-top flex-col gap-y-2 mt-auto pb-4 pt-20 sm:flex-row sm:justify-between sm:text-xs text-center w-full"><div class="mr-0 sm:mr-4">Copyright &copy; 2024 <span aria-label="rocket emoji">🦖</span></div><nav aria-label="More on this site" class="flex gap-x-2 sm:divide-accent sm:divide-dashed sm:divide-x sm:gap-x-0"><a href=/ class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>Home </a><a href=/about class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>About </a><a href=/posts class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>Blog </a><a href=/playlists class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>Playlists </a><a href=/projects class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>Projects </a><a href=/bookmarks class="sm:py-0 px-4 sm:hover:underline cactus-link py-2 sm:px-2" rel=prefetch>Bookmarks</a></nav></footer><vercel-speed-insights data-params={&#34;post&#34;:&#34;integrating-webmentions-with-next-js&#34;} data-pathname=/posts/integrating-webmentions-with-next-js/ data-props={}></vercel-speed-insights></body></html>